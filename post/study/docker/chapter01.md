---
title: "Docker学习笔记：第一章 docker概述"
date: 2018-10-09T09:57:53+08:00
description: "Docker学习 第一章 Docker概述"
thumbnail: "img/study/docker/docker.png"
keywords: "docker notes 学习笔记"
categories:
  - "Docker"
tags:
  - "docker"
  - "notes"
---

# 什么是Docker

### Docker与传统虚拟化方式的不同之处<br>
传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需的应用进程；
![](/img/study/docker/1.4.1.1.png)
容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟化。
![](/img/study/docker/1.4.1.2.png)

---

### 为什么要使用Docker？

- **更高效的利用系统资源**<br>
不需要硬件虚拟化及运行整个操作系统的额外开销；
- **更快速的启动时间**<br>
 由于直接运行到宿主内核，无需启动完整的操作系统，因此可以达到秒级、甚至毫秒级的启动时间；
- **一致的运行环境**<br>
 Docker的镜像提供了除内核外完整的运行时环境，确保应用程序环境一致性，不会出现开发环境、测试环境、生产环境不一致的问题；
- **持续交付和部署**<br>
 Docker可以通过定制应用镜像来实现持续集成、持续交付’部署。开发人员可以通过Dockerfile来进行镜像的构建，并结合持续集成系统进行集成测试；运维人员则可以直接在生产环境中快速部署改镜像、甚至结合持续部署系统进行自动化部署；
- **更轻松的迁移**<br>
 Docker确保了执行环境的一致性，使得应用的迁移更加容易；
- **更轻松的维护和扩展**<br>
 Docker使用分层存储和镜像的技术，使得应用重复部分的复用变得更为容易，也使得应用的维护更新变得更加简单，基于基础镜像进一步扩展镜像也变得非常简单；
- **对比传统虚拟机更具有优势**<br>

| 特性       | 容器               | 虚拟机     |
| ---------- | ------------------ | ---------- |
| 启动       | 秒级               | 分钟级     |
| 硬盘使用   | 一般为MB           | 一般为GB   |
| 性能       | 接近原生           | 弱于原生   |
| 系统支持量 | 单机支持上千个容器 | 一般几十个 |

---

### 基本概念

- 镜像

     操作系统分为内核和用户空间，例如Linux就是在内核启动后，挂载root文件系统以提供用户空间支持。而Docker镜像（Image）就相当于挂在到内核上的root文件系统，但是Docker镜像又有别于root文件系统，它**提供了除容器运行时所需要的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）**。

     镜像也不是严格意义上的像ISO那样的打包的文件，它只是一个虚拟的概念，实际上并非一个文件组成，而是由一组文件系统组成，或者是多层文件联合组成。

     分层使用UnionFS技术，具有的特点有：前一层是后一层的基础、构建后就不会改变、改变只发生在当前层等。

     > Tip：非严格意义上讲一台主机，内核为其提供了驱动主机上硬件驱动的低层次软件系统，用户空间提供了操作内核的高层次软件系统，二者共同组成计算机操作系统。
     >
     > Docker镜像可以类比于这种说法中的用户空间，也就是提供操作内核的高层次软件系统。

- 容器

     镜像和容器（Container）的关系，就像面向对象程序设计中的类和实例一样。镜像是静态的定义，容器是镜像运行时的实体。

     容器的实质是进程，但与直接在宿主上执行的进程不同，容器进程运行在属于自己的独立的命名空间中。容器拥有自己的root文件系统、自己的网络配置、自己的进程空间、甚至自己的用户ID空间，使得容器中的进程运行在隔离的环境中，使用起来就像在一个独立于宿主的系统下操作一样。

     容器也分层。每个容器运行时，以镜像为基础层，在其上创建一个当前容器的存储层，我们称这个为容器运行时读写而准备的存储层为容器存储层。

     容器消亡时，容器存储层也随之消亡。

     容器不应该向其存储层写入数据，都应该使用数据卷（Volume）、或者绑定宿主目录，在这些位置的读写才能够跳过容器存储层，直接对宿主（或网络存储）进行读写，其性能和稳定性更高。

     数据卷的生命周期独立于容器，容器消亡，数据卷不会消亡。

- 仓库

     镜像构建完成后，就可以很容易在当前宿主机上运行了，但是如果在其他服务器上使用这个镜像，就需要有一个集中的存储、分发镜像的服务，Docker Registry就是这样的服务。

     一个Docker Registry包括多个仓库（Repository），每个仓库包括多个标签（Tag），每个标签对应一个镜像。

     一个仓库中包含同一个软件不同版本的镜像，标签常用于指定具体的改软件的哪个版本的镜像。默认是latest。

     镜像的坐标有两种形式，一种是：<仓库名>:<标签>，一种是：<多用户环境下的用户名>/<软件名>，但也非绝对，第二种取决于所使用的软件或服务。

     > Tip：由仓库名和标签名组成的字符串可以定义一个软件系统，所以，这个字符串成为软件的坐标。

---

### 安装

   略

---

### 获取镜像
